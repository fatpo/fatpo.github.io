# 1、基础条件
版本:
```
ubuntu 18.04
```
dns：
```
已经添加了IP解析
```

# 2、安装nginx
```
sudo atp-get install nginx
```
# 3、安装hexo
安装nvm：
```
sudo apt-get install git-core
wget -qO- https://raw.github.com/creationix/nvm/master/install.sh | sh
```
这个nvm一定是下载失败的，因为被墙了：
```
sudo vim /etc/hosts
添加：
199.232.96.133 raw.githubusercontent.com
```
这个ip地址：
```
在https://www.ipaddress.com/查询raw.githubusercontent.com的真实IP
```

用nvm 安装 nodejs：
```
source ~/.profile
nvm install stable
npm install -g hexo-cli
```

hexo基本命令：
```
hexo init
hexo g
hexo s
```


# 4、安装https证书
教程：[How to setup Let's Encrypt for Nginx on Ubuntu 18.04](https://gist.github.com/cecilemuller/a26737699a7e70a7093d4dc115915de8)

我按照教程：
创建一个文件夹：
```
mkdir /var/www/maypp
```

创建一个nginx配置： 
```
cat /etc/nginx/sites-available/maypp.conf
```
内容如下：
```$xslt
server {
	listen 80 default_server;
	listen [::]:80 default_server ipv6only=on;

	server_name maypp.com www.maypp.com;
	root /var/www/maypp;

	index index.html;
	location / {
		try_files $uri $uri/ =404;
	}
}
```
重启：
```
sudo rm /etc/nginx/sites-enabled/default
sudo ln -s /etc/nginx/sites-available/myapp.conf /etc/nginx/sites-enabled/myapp.conf

sudo nginx -t
sudo systemctl stop nginx
sudo systemctl start nginx
```
跑一下证书：
```
sudo apt-get update
sudo apt-get install software-properties-common
sudo add-apt-repository universe
sudo add-apt-repository ppa:certbot/certbot
sudo apt-get update
sudo apt-get install certbot python-certbot-nginx

sudo certbot --nginx
```
证书自动更新：
```
sudo certbot renew --dry-run
sudo certbot certificates
```



